CREATE TABLE public.book_status
(
    status text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT "BookStatus_pkey" PRIMARY KEY (status)
)

TABLESPACE pg_default;

ALTER TABLE public.book_status
    OWNER to postgres;

CREATE TABLE public.clients
(
    client_id uuid NOT NULL,
    client_name text COLLATE pg_catalog."default" NOT NULL,
    client_email text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT client_pkey PRIMARY KEY (client_id)
)

TABLESPACE pg_default;

ALTER TABLE public.clients
    OWNER to postgres;

CREATE TABLE public.order_status
(
    order_status text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT "OrderStatus_pkey" PRIMARY KEY (order_status)
)

TABLESPACE pg_default;

ALTER TABLE public.order_status
    OWNER to postgres;


CREATE TABLE public.books
(
    genre text COLLATE pg_catalog."default",
    name text COLLATE pg_catalog."default" NOT NULL,
    year smallint,
    cost money NOT NULL,
    date_of_admission date NOT NULL,
    book_status text COLLATE pg_catalog."default" NOT NULL,
    book_id uuid NOT NULL,
    CONSTRAINT book_pkey PRIMARY KEY (book_id),
    CONSTRAINT book_status FOREIGN KEY (book_status)
        REFERENCES public.book_status (status) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
)

TABLESPACE pg_default;

ALTER TABLE public.books
    OWNER to postgres;

CREATE TABLE public.orders
(
    order_id uuid NOT NULL,
    total_price money NOT NULL,
    date date NOT NULL,
    order_status text COLLATE pg_catalog."default" NOT NULL,
    client_id uuid NOT NULL,
    CONSTRAINT order_pkey PRIMARY KEY (order_id),
    CONSTRAINT client FOREIGN KEY (client_id)
        REFERENCES public.clients (client_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT order_status FOREIGN KEY (order_status)
        REFERENCES public.order_status (order_status) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE public.orders
    OWNER to postgres;

COMMENT ON CONSTRAINT order_status ON public.orders
    IS '
';



CREATE TABLE public.order_specification
(
    order_specification_id uuid NOT NULL,
    order_id uuid NOT NULL,
    book_id uuid NOT NULL,
    CONSTRAINT order_specification_pkey PRIMARY KEY (order_specification_id),
    CONSTRAINT book_id FOREIGN KEY (book_id)
        REFERENCES public.books (book_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT order_id FOREIGN KEY (order_id)
        REFERENCES public.orders (order_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE public.order_specification
    OWNER to postgres;

CREATE TABLE public.requests
(
    request_id uuid NOT NULL,
    book_id uuid NOT NULL,
    count bigint NOT NULL,
    open_close boolean NOT NULL,
    CONSTRAINT requests_pkey PRIMARY KEY (request_id),
    CONSTRAINT book_id FOREIGN KEY (book_id)
        REFERENCES public.books (book_id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE public.requests
    OWNER to postgres;